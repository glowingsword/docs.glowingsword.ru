---
title: 'На серверах с nginx и apache2 не корректно работает директива deny from ip'
authors: 
 - glowingsword
tags:
 - Nginx
 - Apache
 - Проблемы Apache
 - настройка Apache
 - Настройка Nginx
todo: 'Разбросать статью по трём небольшим статьям.'
date: 2020-04-18
---
# На серверах с nginx и apache2 не корректно работает директива deny from ip

Проверяем корректно ли установлен и настроен mod_rpaf. Если настроен не корректно, исправляем проблему правкой настроек данного модуля и перезапускаем httpd и nginx.

Если настройка `mod_rpaf` проблему не решает, значит проблема возникает
из-за бага в `mod_rpaf`, который проявляется при использовании с
некоторыми версиями веб-сервера apache ветки 2.2.x

Для решения данной проблемы необходимо обновить rpaf.

Если обновление не помгло, следует отключить rpaf. После чего собрать из
исходников модуль `mod_realip2` и настроить по аналогии с настройкой `mod_rpaf`.

